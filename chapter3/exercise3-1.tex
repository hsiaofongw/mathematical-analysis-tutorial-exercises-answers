\exercise

1. 设函数$f$在$x=0$可导并且$f(0) = 0$．求极限
\begin{equation*}
    \lim_{x \to 0} \frac{f(x)}{x}.
\end{equation*}

\solve 易知
\begin{align}
    \lim_{x \to 0}\frac{f(x)}{x} &= \lim_{x \to 0} \frac{f(x)-0}{x} \\
    &= \lim_{x \to 0} \frac{f(x)-f(0)}{x} 
\end{align}
这是是导数的定义，又因为$f$在$x=0$可导，因此
\begin{equation}
    \lim_{x \to 0} \frac{f(x)}{x} = f^\prime (0).
\end{equation}
\qed\bigskip

2. 设$f$在$x = 0$可导，$a_n \to 0^-$，$b_n \to 0^+  \; (n \to \infty)$．证明：
\begin{equation*}
    \lim_{n \to \infty} \frac{f(b_n) - f(a_n)}{b_n - a_n} = f^\prime (0).
\end{equation*}

\prove 变换得
\begin{align}
    \frac{f(b_n)-f(a_n)}{b_n-a_n} &= \frac{f(b_n)-f(0)}{b_n-a_n}+\frac{f(0)-f(a_n)}{b_n-a_n} \\
    &= \frac{f(b_n)-f(0)}{b_n} \cdot \frac{b_n}{b_n - a_n} + \frac{f(0)-f(a_n)}{0 - a_n} \cdot \frac{0 - a_n}{b_n - a_n}
\end{align}
令
\begin{align}
    g_1 : \nat &\longrightarrow \real \\
    n &\longmapsto \frac{f(b_n)-f(0)}{b_n}
\end{align}
再令
\begin{align}
    g_2 : \nat &\longrightarrow \real \\
    n &\longmapsto \frac{f(0)-f(a_n)}{0-a_n}
\end{align}
则依归结原则
\begin{align}
    \lim_{n \to \infty} g_1(n) &= \lim_{h \to 0^+} \frac{f(h)-f(0)}{h} = f^{\prime}_+(0) \\
    \lim_{n \to \infty} g_2(n) &= \lim_{h \to 0^-} \frac{f(h)-f(0)}{h} = f^{\prime}_-(0)
\end{align}
令$o(n) = g_2(n)-g_1(n)$，则$o(n) \to 0 \; (n \to \infty)$．于是原式可以写成
\begin{align}
    \frac{f(b_n)-f(a_n)}{b_n - a_n} &= g_1(n) \cdot \frac{b_n}{b_n-a_n} + g_2(n) \cdot \frac{0-a_n}{b_n-a_n} \\
    &= g_1(n) \cdot \frac{b_n}{b_n-a_n} + g_1(n) \cdot \frac{0-a_n}{b_n-a_n} + o(n) \cdot \frac{0-a_n}{b_n-a_n} \\
    &=g_1(n) \cdot \frac{b_n + 0 - a_n}{b_n - a_n} + o(n) \cdot \frac{0 - a_n}{b_n - a_n} \\
    &= g_1(n) + o(n) \cdot \frac{0-a_n}{b_n - a_n}
\end{align}
由于$a_n \to 0^-, \, b_n \to 0^+, \; (n \to \infty)$，故存在足够大的$M > 0$，使得对于一切$n \in M, n \geq M$都有
\begin{equation}
    -a_n > 0, \quad b_n > 0
\end{equation}
并且
\begin{equation}
    0 < \frac{0 - a_n}{b_n - a_n} < \frac{b_n - a_n}{b_n - a_n} = 1
\end{equation}
由此可见
\begin{equation}
    \frac{0-a_n}{b_n - a_n}
\end{equation}
是一个有界量，从而当$n \to \infty$时，
\begin{equation}
    o(n) \cdot \frac{0 - a_n}{b_n - a_n} \to 0
\end{equation}
从而
\begin{align}
    \lim_{n \to \infty} \frac{f(b_n)-f(a_n)}{b_n-a_n} &= \lim_{n \to \infty} \left( g_1(n) + o(n) \cdot \frac{0 - a_n}{b_n-a_n}\right) \\
    &= \lim_{n \to \infty} g_1(n) + \lim_{n \to \infty} \left( o(n) \cdot \frac{0 - a_n}{b_n - a_n} \right) \\
    &= f^{\prime}_{+}(0) + 0 = f^{\prime}_{+}(0) = f^{\prime}(0).
\end{align}
\qed\bigskip

3. 设$f$是偶函数且在$x=0$可导．证明：$f^{\prime}(0)=0$.

\prove 不失一般性设$f^{\prime}(0)>0$，因为$f$在$x=0$可导，故$f^{\prime}_{-}(0)=f^{\prime}_{+}(0)=f^{\prime}(0) > 0$，也就是说
\begin{align}
    \lim_{s \to 0^-} \frac{f(s)-f(0)}{s} &= f^{\prime}_{-}(0) > 0 \\
    \lim_{h \to 0^+} \frac{f(h)-f(0)}{h} &= f^{\prime}_{+}(0) > 0 
\end{align}
从而存在足够小的正数$\delta > 0$，使得对任意$x \in (0,0+\delta)$，都有
\begin{equation}
    \frac{f(x)-f(0)}{x} > 0 \implies f(x) - f(0) > 0 \implies f(x) > 0
\end{equation}
并且对任意$-x \in (0-\delta, 0)$都有
\begin{equation}
    \frac{f(-x)-f(0)}{-x} > 0 \implies f(-x)-f(0) < 0 \implies f(-x) < f(0)
\end{equation}
从而有
\begin{equation}
    f(-x) < f(0) < f(x)
\end{equation}
可是这与$f$作为偶函数是矛盾的．\qed\bigskip

4. 设函数$f$在$x_0$可导．证明：
\begin{equation*}
    \lim_{h \to 0} \frac{f(x_0+h)-f(x_0-h)}{2h} = f^{\prime}(x_0).
\end{equation*}
举例说明，即使上式左边的极限存在且有限，$f$在$x_0$也未必可导．

\prove 易知
\begin{align}
    \text{左边} &= \lim_{h \to 0} \frac{f(x_0+h)-f(x_0-h)}{2h} \\
    &= \lim_{h \to 0} \frac{f(x_0 + h) - f(x_0) + f(x_0) - f(x_0 - h)}{2h} \\
    &= \lim_{h \to 0} \frac{f(x_0 + h) - f(x_0)}{2h} + \lim_{h \to 0} \frac{f(x_0)-f(x_0-h)}{2h} \\
    &= \frac{1}{2} \lim_{h \to 0} \frac{f(x_0 + h) - f(x_0)}{h} + \frac{1}{2} \lim_{-h \to 0} \frac{f(x_0 + (- h)) - f(x_0)}{-h} \\
    &= \frac{1}{2} f^{\prime} (x_0) + \frac{1}{2} f^{\prime} (x_0) = f^{\prime} (x_0) = \text{右边}.
\end{align}
由此即证．\qed\bigskip

\textbf{举例．}令
\begin{align}
    f: \real \setminus \{ 0 \} &\longrightarrow \real^+ \\
    x &\longmapsto \bigg\lvert \frac{1}{x} \bigg\rvert
\end{align}
取$x_0 = 0$，那么可以算得
\begin{equation}
    \lim_{h \to 0} \frac{f(0 + h) - f(0-h)}{2h} = \lim_{h \to 0} \frac{0}{2h} = 0.
\end{equation}
可是极限
\begin{equation}
    \lim_{h \to 0^+} \bigg\lvert \frac{1}{x} \bigg\lvert = -\infty, \quad \lim_{h \to 0^+} \bigg\lvert \frac{1}{x} \bigg\rvert = + \infty
\end{equation}
这就说明$f$在$x = 0$处的导数不存在．\qed\bigskip

5. 在抛物线$y=x^2$上：
\begin{tasks}(1)
    \task 哪一点的切线平行于直线$y=4x-5$？ 
    \task 哪一点的切线垂直于直线$2x-6y+5=0$？ 
    \task 哪一点的切线与直线$3x-y+1=0$交成$45^{\circ}$的角？
\end{tasks}

\solve 函数$x \mapsto x^2$是定义在$\real$上的，任取$x_0 \in \real$，设$h > 0$，我们有
\begin{equation}
    (x_0 + h)^2 - x_0^2 = h(2x_0 + h)
\end{equation}
从而
\begin{equation}
    \lim_{h \to 0} \frac{\left(x_0+h\right)^2-x_0^2}{h} = \lim_{h \to 0} \left( 2x_0 + h\right) = 2x_0
\end{equation}
当点$(x_0, x_0^2)$处的切线平行于$y=4x-5$时，它们的斜率相等，也就是
\begin{equation}
    2x_0 = 4 \implies x_0 = 2
\end{equation}
由此可见在点$(2, 4)$处的切线与$y=4x-5$平行．并且当两条直线垂直时，它们的斜率的乘积为$-1$，设在点$(x_1, x_1^2)$处的切线与$2x-6y+5=0$垂直，那么有
\begin{equation}
    2x_0 \cdot \frac{1}{3} = -1 \implies x_0 = -\frac{3}{2}
\end{equation}
直线$3x-y+1=0$的方向向量为$(1, 3)$，而任意一点$(x_2, x_2^2)$处的切线的方向向量为$(1, 2x_2)$，设这两条直线的夹角为$\theta$，那么
\begin{equation}
    (1, 3) \cdot (1, 2x_2) = \lVert (1, 3) \rVert \, \lVert (1, 2x_2) \rVert \, \cos \, \theta 
\end{equation}
若$\theta = 45^\circ$，那么$\cos \, \theta = \displaystyle\frac{1}{\sqrt{2}}$，那么
\begin{equation}
    1 + 6 x_2 = \frac{1}{\sqrt{2}} \sqrt{10} \sqrt{1 + 4x_2^2}
\end{equation}
解出$x_2 = \displaystyle\frac{1}{4}$．\qed\bigskip

6. 证明：抛物线$y=x^2$上的两点$(x_1,x_1^2)$和$(x_2,x_2^2)$处的切线互相垂直的充分必要条件是，$x_1$和$x_2$满足关系$4x_1 x_2 + 1 = 0$.

\prove 

必要性．

\begin{align}
    &\mathrel{\phantom{\implies}} \text{点}(x_1,x_1^2)\text{和点}(x_2,x_2^2)\text{处的切线垂直} \\
    &\implies \text{它们的斜率的乘积为} -1 \\
    &\implies \text{令}f(x)=x^2, \, \text{那么} f^{\prime}(x_1) \cdot f^{\prime} (x_2) = -1 \\
    &\implies \text{也就是} 2x_1 \cdot 2x_2 = -1 \\
    &\implies 4x_1 x_2 + 1 = 0.
\end{align}

充分性．

\begin{align}
    &\mathrel{\phantom{\impliedby}} \text{点}(x_1,x_1^2)\text{和点}(x_2,x_2^2)\text{处的切线垂直} \\
    &\impliedby \text{它们的斜率的乘积为} -1 \\
    &\impliedby \text{令}f(x)=x^2, \, \text{那么} f^{\prime}(x_1) \cdot f^{\prime} (x_2) = -1 \\
    &\impliedby \text{也就是} 2x_1 \cdot 2x_2 = -1 \\
    &\impliedby 4x_1 x_2 + 1 = 0.
\end{align}

得证．\qed\bigskip

7. 设函数$f$在$x=a$可导，且$f(a)\neq 0$．求数列极限
\begin{equation}
    \lim_{n \to \infty} \left( \frac{f(a+1/n)}{f(a)} \right)^n .
\end{equation}

\solve 依归结原则，它等于
\begin{equation}
    \lim_{n \to \infty} \left( \frac{f(a+1/n)}{f(a)} \right)^n = \lim_{h \to 0} \left( \frac{f(a+h)}{f(a)}\right)^{1/h}
\end{equation}
它是$1^\infty$型的，令
\begin{equation}
    u(h) = \frac{f(a+h)}{f(a)}, \quad v(h) = \frac{1}{h}
\end{equation}
于是
\begin{equation}
    \lim_{h \to 0} \left(u(h)-1\right)v(h) = \lim_{h \to 0} \left(\frac{f(a+h)-f(a)}{f(a)}\right) \cdot \frac{1}{h} = \lim_{h \to 0} \frac{1}{f(a)} \cdot \frac{f(a+h)-f(a)}{h} = \frac{f^{\prime}(a)}{f(a)}
\end{equation}
于是原式等于
\begin{equation}
    \lim_{n \to \infty} \left( \frac{f(a+1/n)}{f(a)} \right)^n = \lim_{h \to 0} \left( \frac{f(a+h)}{f(a)}\right)^{1/h} = \exp \, \{ \frac{f^{\prime}(a)}{f(a)} \}.
\end{equation}
\qed\bigskip

8. 设函数$\varphi$在点$a$处连续，又在$a$的近旁有$f(x)=(x-a)\varphi (x)$和$g(x)=\lvert x - a \rvert \varphi (x)$．证明：$f$在点$a$处可导，并求出$f^{\prime}(a)$．又问：在什么条件下$g$在$a$处可导？

\prove 设$h > 0$，计算得
\begin{align}
    &\mathrel{\phantom{\implies}} f(a) = 0, \quad f(a+h) = h \varphi (a + h) \\
    &\implies \frac{f(a+h) - f(a)}{h} =  \varphi (a+h) \\
    &\implies \lim_{h \to 0} \frac{f(a+h)-f(a)}{h} = \lim_{h \to 0} \varphi (a+h) = \varphi(a).
\end{align}
由此即证．\qed\bigskip

设$h>0$，计算得
\begin{align}
    &\mathrel{\phantom{\implies}} g(a) = 0, \quad g(a+h) = \lvert h \rvert \varphi (a+h) \\
    &\implies \lim_{h \to 0^-} \frac{g(a+h)-g(a)}{h} = \lim_{h \to 0^-} \left( \frac{\lvert h \rvert}{h} \cdot \varphi (a+h) \right) = -\varphi (a) \\
    &\mathrel{\phantom{\implies}} \lim_{h \to 0^+} \frac{g(a+h)-g(a)}{h} = \lim_{h \to 0^+} \left(\frac{\lvert h \rvert}{h} \cdot \varphi (a+h)\right) = \varphi (a) \\
    &\iff \text{若} \, g  \, \text{在} \, x=a \, \text{可导，则} \, - \varphi (a) = \varphi (a) \implies \varphi (a) = 0.
\end{align}
当$ \varphi (a)=0$时，$g$在$x=a$可导．\qed\bigskip

9. 设$f(x) = x(x-1)^2(x-2)^3$．求$f^{\prime}(0), f^{\prime}(1)$和$f^{\prime}(2)$.

\solve 利用无穷小运算法则
\begin{align}
    f(h) &= h(h-1)^2(h-2)^3 \\
    &= h (1 - 2h + O(h^2))(\binom{3}{0}(-2)^3 + \binom{3}{1} (-2)^2 h + O(h^3)) \\
    &= (h + O(h^3))(-8 + O(h^3)) = -8h + O(h^6) = -8h + o(h) \; (h \to 0)
\end{align}
于是有
\begin{align}
    f^{\prime}(0) = \lim_{h \to 0} \frac{f(h)-f(0)}{h} = \lim_{h \to 0} \frac{-8h + o(h)}{h} = -8
\end{align}
计算得
\begin{align}
    &\mathrel{\phantom{\implies}} f(1+h) = (1+h)h^2 (h-1)^3 = o(h) \; (h \to 0) \\
    &\implies f^{\prime}(1) = \lim_{h \to 0} \frac{f(1+h)-f(1)}{h} = \lim_{h \to 0} \frac{f(1+h)}{h} = \lim_{h \to 0} \frac{o(h)}{h} = 0
\end{align}
计算得
\begin{align}
    &\mathrel{\phantom{\implies}} f(2+h) = (2+h)(1+h)^2 h^3 = o(h) \; (h \to 0) \\
    &\implies f^{\prime}(2) = \lim_{h \to 0} \frac{f(2+h)-f(2)}{h} = \lim_{h \to 0} \frac{f(2+h)}{h} = \lim_{h \to 0} \frac{o(h)}{h} = 0.
\end{align}
\qed\bigskip

10. 设
\begin{equation*}
    f(x) = \begin{cases}
        0, & x = 0, \\
        x^\lambda \sin \, \displaystyle\frac{1}{x}, & x \neq 0.
    \end{cases}
\end{equation*}
求证：当$\lambda > 1$时$f^{\prime}(0)$存在；而当$\lambda \leq 1$时，$f$在$x=0$处不可导．

\prove 当$\lambda > 1$时，设$h > 0$，有
\begin{align}
    \frac{f(h)-f(0)}{h} = \frac{f(h)}{h} = h^{\lambda-1} \sin \, \frac{1}{h}
\end{align}
式中$\sin \, \displaystyle\frac{1}{h}$为有界量，而因为$\lambda-1>0$所以$h^{\lambda-1}=o(\lambda)$是无穷小量，故极限
\begin{equation}
    \lim_{h \to 0} \frac{f(h)-f(0)}{h} = \lim_{h \to 0} h^{\lambda - 1} \sin \, \frac{1}{h}
\end{equation}
存在．故$f^{\prime}(0)$存在．

当$\lambda = 1$时
\begin{equation}
    \frac{f(h)-f(0)}{h} = \sin \, \frac{1}{h}
\end{equation}
极限
\begin{equation}
    \lim_{h \to 0} \frac{f(h)-f(0)}{h} = \sin \, \frac{1}{h}
\end{equation}
不存在．故$f^{\prime}(0)$不存在．


当$\lambda < 1$时，令
\begin{equation}
    a_n = \left(2\pi n + \frac{\pi}{2}\right)^{-1}, \quad b_n = \left(2 \pi n\right)^{-1}
\end{equation}
则数列
\begin{equation}
    a_n^{\lambda-1} \sin \, \frac{1}{a_n} \to +\infty, \quad b_n^{\lambda - 1} \sin \, \frac{1}{b_n} \to 0
\end{equation}
从而依归结原则，极限
\begin{equation}
    \lim_{h \to 0} \frac{f(h)-f(0)}{h} = \lim_{h \to 0} h^{\lambda - 1} \sin \, \frac{1}{h}
\end{equation}
不存在，故$f^{\prime}(0)$不存在．